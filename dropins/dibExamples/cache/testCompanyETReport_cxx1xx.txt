
(function() {
    var requiredFiles = [];
        //Adding some special requirements for this dropin
    var testCompanyETReport = angular.module('testCompanyETReport', [requiredFiles]);
    testCompanyETReport.factory('testCompanyETReportStore',['ajax', '$log', 'recordFactory','discoverService', function (ajax, $log, recordFactory,discoverService) {
        var url = function () {
            return discoverService.addToUrl({
                field : $('[dib-container=testCompanyETReport]'),
                url : DIB__base_url+"/dropins/setNgMaterial/dibHtmlTemplate/Template/open/testCompanyETReport"
            });
        };
        return {
            url : url
        };
    }]);
})();
(function() {
var testCompanyETReport = angular.module('testCompanyETReport');
testCompanyETReport.component('testCompanyETReport', {
    controllerAs: 'testCompanyETReport',
    templateUrl: DIB__base_url + '/dropins/setNgMaterial/dibHtmlTemplate/Template/view/testCompanyETReport.html',
    controller : component__testCompanyETReport
});
component__testCompanyETReport.$inject = [  
            '$scope','discoverService','testCompanyETReportStore','containerService', '$rootScope','$sce', '$timeout','containerService','recordFactory','crudService','utilityService'];
    function component__testCompanyETReport($scope,discoverService,testCompanyETReportStore,containerService, $rootScope,$sce, $timeout,containerService,recordFactory,crudService,utilityService) {
                    $scope.container = {};
            $scope.container.Id = '3407';
            $scope.container.Name = 'testCompanyETReport';
            $("[dib-container='testCompanyETReport']").trigger('load');
            var crudController = "/peff/Crud";
                    $scope.model = {};
        $scope.model._GET = recordFactory.modelConstruct();
            var reloadContainerFunctions = [];
            containerService.watchModel($scope);
	        $scope.common = $rootScope.common;
            $scope.primaryKeys = [];
        $scope.menus = {};
        $scope.dropdowns = {};
        //load all dropdowns required for this container
            $scope.openAuditTrail = function (portAlias) {
                $log.warn('Audit trail not available for this container, as a table is not linked to this view');
            };
        function setupUrl() { 
            var url = testCompanyETReportStore.url();
            if (!!url.url == false) return;
            var tmpUri = url.url;
            if (tmpUri.indexOf("?") !== -1) {
              tmpUri += "&" + $.param(url.data);
            } else {
               tmpUri += "?" + $.param(url.data);
            }
            $sce.trustAsResourceUrl(tmpUri);
            $scope.model.url = tmpUri;
        }
        if (!!containerService.isSubContainer($("[dib-container=testCompanyETReport]")) === false) { 
            setupUrl();
        }
        $scope.reloadContainer = function (options) {
                setupUrl();
            $scope.frameStyle = {
                "height" : "200px"
            };
            //@TODO to figure out how to update the screen height
            // $timeout(function () { 
            //     $scope.frameStyle = {
            //         "height" : $('[dib-container=testCompanyETReport]').contents().find('body').height() + "px"
            //     };
            // }, 100);
        };
    }  
})();
