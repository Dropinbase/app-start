(function() {var require = ['/dropins/setNgMaterial/dibGrid/js/components/dibTableWidth.js','/dropins/setNgMaterial/dibGrid/js/components/dibInlineEdit.js','/dropins/setNgMaterial/dibGrid/js/services/dibGrid.js','/dropins/setNgMaterial/dibForm/js/services/dibForm.js'];require.push('/dropins/setNgMaterial/dibGlobals/js/component/selectDefault.js');var files = [];angular.forEach(require, function (file,index) {files.push(DIB.base_url+'/files'+file);});var dibtestCompanySqlRptGrid = angular.module('dibtestCompanySqlRptGrid', [files]);dibtestCompanySqlRptGrid.factory('dibtestCompanySqlRptGridDefinition',dibtestCompanySqlRptGridDefinition);dibtestCompanySqlRptGridDefinition.$inject = ['dibContainer'];function dibtestCompanySqlRptGridDefinition(dibContainer) {return {model : model,view : view,info : info,primaryKeys : primaryKeys};function model() {var model = {};model._GET = {};model['id'] = '';model._GET['id'] = dibContainer.modelItem({key : 'id',dataType : "text",create : true,update : true,service : null,itemAlias : 'id'});model['name'] = '';model._GET['name'] = dibContainer.modelItem({key : 'name',dataType : "text",create : true,update : true,service : null,itemAlias : 'name'});model['chinese_name'] = '';model._GET['chinese_name'] = dibContainer.modelItem({key : 'chinese_name',dataType : "text",create : true,update : true,service : null,itemAlias : false});model['parent_company'] = '';model._GET['parent_company'] = dibContainer.modelItem({key : 'parent_company',dataType : "sqltext",create : true,update : true,service : null,itemAlias : false});model['website'] = '';model._GET['website'] = dibContainer.modelItem({key : 'website',dataType : "text",create : true,update : true,service : null,itemAlias : false});model['icon'] = '';model._GET['icon'] = dibContainer.modelItem({key : 'icon',dataType : "text",create : true,update : true,service : null,itemAlias : false});return model;};function view() {var view = {};view.id = {'disabled' : false,'visible' : true, 'class' : null, 'style' : null };view.name = {'disabled' : false,'visible' : true, 'class' : null, 'style' : null };return view;};function info(){var container = {};container.Id = '7159';container.Name = 'dibtestCompanySqlRptGrid';container.SubContainerItemAliases = [];return container;};function primaryKeys() {return [];};};dibtestCompanySqlRptGrid.component('dibtestCompanySqlRptGrid', {controllerAs: 'dibtestCompanySqlRptGrid',templateUrl: DIB.base_url + '/dropins/setNgMaterial/dibGrid/Template/view/dibtestCompanySqlRptGrid.html',controller : component__dibtestCompanySqlRptGrid});component__dibtestCompanySqlRptGrid.$inject = [ 'dibtestCompanySqlRptGridDefinition','$scope','$element','dibCrud','dibNavigation','dibAction','dibContainer','dibDiscover','dibRecord','dibUtility','dibCommon','$log','$q','$ocLazyLoad','dibGrid', 'dibForm', '$location', '$timeout', 'dibMessage','dibKeysPressed'];function component__dibtestCompanySqlRptGrid(dibtestCompanySqlRptGridDefinition,$scope,$element,dibCrud,dibNavigation,dibAction,dibContainer,dibDiscover,dibRecord,dibUtility,dibCommon,$log,$q,$ocLazyLoad,dibGrid, dibForm, $location, $timeout, dibMessage,dibKeysPressed) {var ctrl = this;var crudController = "/peff/Crud";var $dibContainer = $element.first();$scope.container = dibtestCompanySqlRptGridDefinition.info();$scope.model = dibtestCompanySqlRptGridDefinition.model();$scope.view = dibtestCompanySqlRptGridDefinition.view();$scope.primaryKeys = dibtestCompanySqlRptGridDefinition.primaryKeys();$scope.dibCommon = dibCommon;dibContainer.watchModel($scope, function () {});var $dibContainer = $element.first();$scope.menus = {};function filterList($scope,$dibContainer,service, query, dropdown) {return service.list($scope,$dibContainer, query).then(function (items) {dropdown.items = items;return $q.when();});}
$scope.dropdowns = {};$scope.openAuditTrail = function (portAlias) {$log.warn('Audit trail not available for this container, as a table is not linked to this view');};$scope.gridOptions = {};$scope.gridOptions.sortFields = {};$scope.gridOptions.sortNr = 0;$scope.gridOptions.toggleSort = function (fieldName) {dibGrid.toggleSort($scope,"dibtestCompanySqlRptGrid",fieldName);loadGrid();};$scope.search = {};$scope.clearSearch = function () {dibGrid.clearSearch($scope);};$scope.searchGrid = function () {dibGrid.prepareSearch($scope, "dibtestCompanySqlRptGrid");loadGrid();};$scope.$watch("showSearch", function () {$timeout(function () {$("[dib-container=dibtestCompanySqlRptGrid]").find('.dib-grid-column-content').trigger('refreshHeight')},50);if (!!$scope.showSearch === false) {$scope.search = {};if (!!$scope.gridData) loadGrid();}});ctrl.$onInit = function () {$scope.gridOptions.inlineAddShow = "" == "true";$scope.selectedItems = [];$scope.lastSelectedItem = null;var arraySelected = [];$scope.useSelectedRow = function ($event, model) {dibGrid.useSelectedRow($scope, $event, model);}
$scope.selectRow = function (row) {dibGrid.selectRow($scope,$element, row);if (row.___selected) {}  else {}};$scope.itemAliasData = function () {if (!!$scope.lastSelectedItem == false) return null;var itemSelected = dibRecord.primaryKeyData($scope.primaryKeys, $scope.lastSelectedItem);angular.extend(itemSelected, dibRecord.getDataFromSelected($scope, $scope.lastSelectedItem, true).recordData);return itemSelected;};$scope.scrollConfig = {autoHideScrollbar: false,theme: 'light',advanced:{updateOnContentResize: true},setHeight: 200,scrollInertia: 0};$scope.page = {count : 0,limit : 10,number : 1};$scope.nextPage = function () {$scope.page.number++;};$scope.lastPage = function () {$scope.page.number = $scope.page.count;};$scope.firstPage = function () {$scope.page.number = 1;};$scope.previousPage = function () {$scope.page.number--;};$scope.$watch("page.limit", function () {$scope.page.number = 1;if (!!$scope.gridData) loadGrid();});$scope.$watch("page.number", function () {if (!!$scope.gridData) loadGrid();});dibGrid.applyFilterOnUrl($scope, "dibtestCompanySqlRptGrid");dibGrid.applySortOnUrl($scope, "dibtestCompanySqlRptGrid");$scope.reloadContainer  = function (options) {dibGrid.applyFilterOnUrl($scope, "dibtestCompanySqlRptGrid");dibGrid.applySortOnUrl($scope, "dibtestCompanySqlRptGrid");loadGrid();};}
ctrl.$postLink = function () {$scope.reloadContainer({ force : true });};function loadGrid() {$scope.loadingData = true;dibCrud.list($scope, $element,crudController,'dibtestCompanySqlRptGrid',$scope.page, $scope.search, null, $scope.gridOptions.sortFields).then(function (data) {if (!!data.records == false)data.records = [];$scope.selectedItems = [];$scope.lastSelectedItem = null;var arraySelected = [];$scope.page.count = Math.ceil(data.filtertotal / $scope.page.limit, 10);$scope.page.records = data.filtertotal;$scope.page.totalRecords = data.total;$scope.page.fromRecord = $scope.page.number==1? 1 : ($scope.page.number-1)*$scope.page.limit;$scope.page.toRecord = $scope.page.fromRecord==1? $scope.page.fromRecord + data.records.length - 1 : $scope.page.fromRecord + data.records.length;if ($scope.page.fromRecord == 1 && data.records.length ==0 ) {$scope.page.fromRecord = 0;}
if ($scope.page.number != 1 && data.records.length ==0) {loadGrid();$scope.page.number --;return;}
$scope.loadingData = false;$scope.gridData= data.records;$scope.$broadcast('load');$timeout(function () {$('[dib-container=dibtestCompanySqlRptGrid]').find('[select-default]').trigger('refreshDefault');},100);}, function (error) {$scope.loadingData = false;});};}})();